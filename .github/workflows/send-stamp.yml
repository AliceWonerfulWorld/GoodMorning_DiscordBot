name: Send Discord Stamp

on:
  schedule:
    # JST=UTC+9 → 06:00JST=21:00UTC, 22:00JST=13:00UTC
    - cron: '0 21 * * *'
    - cron: '0 13 * * *'
  workflow_dispatch:

jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Send morning (06:00 JST)
        if: ${{ github.event.schedule == '0 21 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"<:gdm:1298821074183655424>"}' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send night (22:00 JST)
        if: ${{ github.event.schedule == '0 13 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"<:nero:1293956236802523156>"}' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send test (manual run)
        if: ${{ github.event_name == 'workflow_dispatch' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"テスト送信です ✅"}' \
               "${{ secrets.WEBHOOK_URL }}"