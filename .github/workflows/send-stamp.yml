name: Send Discord Stamp

on:
  schedule:
    # JST=UTC+9 â†’ 06:00JST=21:00UTC, 12:00JST=03:00UTC, 13:00JST=04:00UTC, 16:30JST=07:30UTC, 22:00JST=13:00UTC
    - cron: '0 21 * * *'
    - cron: '0 3 * * *'
    - cron: '0 4 * * *'
    - cron: '30 7 * * *'
    - cron: '0 13 * * *'
  workflow_dispatch:

jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Send morning (06:00 JST)
        if: ${{ github.event.schedule == '0 21 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"<:gdm:1298821074183655424>"}' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send noon (12:00 JST)
        if: ${{ github.event.schedule == '0 3 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{
                 "content": "ãƒ•ã‚¡ãƒ«ã‚³ãƒ³ãƒ»ãƒ©ãƒ³ãƒã®æ™‚é–“ã ï¼ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒ•ã‚¡ãƒ«ã‚³ãƒ³ãŒãŠçŸ¥ã‚‰ã›ã™ã‚‹ãï¼ğŸ½ï¸",
                 "embeds": [{
                   "image": {
                     "url": "https://raw.githubusercontent.com/gomaa/GoodMorning_DiscordBot/main/images/falcon-lunch.jpg"
                   }
                 }]
               }' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send afternoon (13:00 JST)
        if: ${{ github.event_name == 'workflow_dispatch' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{
                 "content": "ã“ã“ãŒè²´æ§˜ã®å¢“å ´ã ï¼åˆå¾Œã®æˆæ¥­ãŒå§‹ã¾ã‚‹ãï¼ğŸ’€",
                 "embeds": [{
                   "image": {
                     "url": "https://raw.githubusercontent.com/gomaa/GoodMorning_DiscordBot/main/images/kazuya-afternoon.jpg"
                   }
                 }]
               }' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send afternoon end (16:30 JST)
        if: ${{ github.event.schedule == '30 7 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{
                 "content": "æˆæ¥­çµ‚äº†ã ï¼Guilty Gearã®æ™‚é–“ã ãƒãƒãƒ§ï¼ğŸ®",
                 "embeds": [{
                   "image": {
                     "url": "https://raw.githubusercontent.com/gomaa/GoodMorning_DiscordBot/main/images/potemkin-evening.jpg"
                   }
                 }]
               }' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send night (22:00 JST)
        if: ${{ github.event.schedule == '0 13 * * *' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"<:nero:1293956236802523156>"}' \
               "${{ secrets.WEBHOOK_URL }}"
      - name: Send test (manual run)
        if: ${{ github.event_name == 'workflow_dispatch' }}
        run: |
          curl -H "Content-Type: application/json" \
               -d '{"content":"ãƒ†ã‚¹ãƒˆé€ä¿¡ã§ã™ âœ…"}' \
               "${{ secrets.WEBHOOK_URL }}"